import mongoose, { Schema } from 'mongoose';
import mongooseAggregatePaginate from 'mongoose-aggregate-paginate-v2';
import mongooseDelete from 'mongoose-delete';
import mongoosePaginate from 'mongoose-paginate-v2';

import { BaseDocument } from '@/core';
import { applyPlugin } from '@/helpers';

export interface I{{pascalCase name}} extends BaseDocument {
  // TODO: Add your fields here
  name: string;
}

const {{pascalCase name}}Schema = new Schema<I{{pascalCase name}}>(
  {
    // TODO: Define your schema fields here
    name: {
      type: String,
      required: true,
    },
  },
  {
    timestamps: true,
  }
);

applyPlugin({{pascalCase name}}Schema, mongooseDelete, {
  deletedAt: true,
  overrideMethods: 'all',
});
applyPlugin({{pascalCase name}}Schema, mongooseAggregatePaginate);
applyPlugin({{pascalCase name}}Schema, mongoosePaginate);

{{pascalCase name}}Schema.index({ createdAt: -1 });

const {{pascalCase name}} = mongoose.model<I{{pascalCase name}}>('{{pascalCase name}}', {{pascalCase name}}Schema);

export default {{pascalCase name}};
